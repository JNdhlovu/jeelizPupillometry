 /**
 * Jeeliz Pupillometry - https://github.com/jeeliz/jeelizPupillometry
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEPUPILAPI=(function(){function ha(b,c,e){return b*(1-e)+c*e}function ta(b,c){var e=new XMLHttpRequest;e.open("GET",b,!0);e.withCredentials=!1;e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||c(e.responseText)};e.send()}function za(b,c,e){return Math.min(Math.max((e-b)/(c-b),0),1)}
function Ba(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Da(b,c){var e=c%8;return b[(c-e)/8]>>7-e&1}
function Ea(b){var c=JSON.parse(b);b=c.ne;var e=c.nf,l=c.n;var n="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var r=n.length;c=new Uint8Array(r);for(var f=0;f<r;++f)c[f]=n.charCodeAt(f);n=new Float32Array(l);r=new Float32Array(e);f=b+e+1;for(var t=0;t<l;++t){for(var p=f*t,x=0===Da(c,p)?1:-1,m=p+1,u=1,z=0,B=m+b-1;B>=m;--B)z+=u*Da(c,B),u*=2;m=z;p=p+1+b;u=r.length;z=0;for(B=p;B<p+u;++B)r[z]=Da(c,B),++z;for(u=p=0;u<e;++u)p+=r[u]*Math.pow(2,-u-1);n[t]=0===p&&0===
m?0:x*(1+p)*Math.pow(2,1+m-Math.pow(2,b-1))}return n}
var q=function(){function b(g,y){g=a.createShader(g);a.shaderSource(g,y);a.compileShader(g);return a.getShaderParameter(g,a.COMPILE_STATUS)?g:!1}function c(g,y){g=b(a.VERTEX_SHADER,g);y=b(a.FRAGMENT_SHADER,y);n.push(g,y);var C=a.createProgram();a.attachShader(C,g);a.attachShader(C,y);a.linkProgram(C);return C}function e(g){void 0===g.W&&(g.W="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===g.fa&&(g.fa=["a0"]);void 0===
g.Z&&(g.Z=[2]);if(void 0===g.precision||"highp"===g.precision)g.precision=x;g.id=t++;void 0!==g.wd&&g.wd.forEach(function(C,R){g.b=g.b.replace(C,g.Ga[R])});g.ub=0;g.Z.forEach(function(C){g.ub+=4*C});g.pa=c(g.W,"precision "+g.precision+" float;\n"+g.b);g.l={};g.c.forEach(function(C){g.l[C]=a.getUniformLocation(g.pa,C)});g.attributes={};g.ma=[];g.fa.forEach(function(C){var R=a.getAttribLocation(g.pa,C);g.attributes[C]=R;g.ma.push(R)});if(g.g){a.useProgram(g.pa);f=g;r=g.id;for(var y in g.g)a.uniform1i(g.l[y],
g.g[y])}g.bb=!0}function l(g){Fa.Dd(K);r!==g.id&&(K.ra(),r=g.id,f=g,a.useProgram(g.pa),g.ma.forEach(function(y){0!==y&&a.enableVertexAttribArray(y)}))}var n=[],r=-1,f=null,t=0,p=!1,x="highp",m=["u1"],u=["u0"],z={u1:0},B={u0:0},S={u1:0,u2:1},L={u3:0},G={s0:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:m,g:z},s1:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:m,g:z,precision:"lowp"},s2:{b:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
c:["u1","u2"],g:S},s3:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",c:m,g:z},s4:{b:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","mask"],g:S},s5:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",c:m,g:z},s6:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
c:m,g:z},s7:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",c:["u0","u4"],g:B},s8:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",c:["u0","u4"],g:B},s9:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
c:m,g:z},s10:{b:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",c:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],g:z},s12:{b:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
c:["u1","u8"],g:z},s13:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:u,g:B},s14:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",c:u,g:B},s15:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",c:u,g:B},s16:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:u,g:B},s17:{b:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{b:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:u,g:B},s19:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
c:u,g:B},s20:{b:"uniform sampler2D u0,u10;uniform float u11;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,f);float b=u11*u11;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u12","u11"],g:{u0:0,u12:1}},s21:{b:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),g=floor(u13.x*fract(b*u13.y)),f=(g*u13.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
c:["u1","u13"],g:z},s22:{b:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),e=texture2D(u15,c);gl_FragColor=d*e;}",c:["u14","u15","u16"],g:{u15:0,u14:1,u16:2}},s23:{b:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",c:["u15","u14","u17"],g:{u15:0,u14:1}},s24:{b:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u17,m=floor(i),c=i-m;vec4 n=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 o=texture2D(u18,c),p=texture2D(u19,c),q=texture2D(u20,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
c:"u14 u15 u17 u21 u18 u19 u20".split(" "),g:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6}},s25:{b:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),g=u23*vv0-a;float b=u17/u23;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u23;float l=u23*u25/u17;vec2 m=l*c,i=(m+d*u24)/u25,e=step(i,j);vec4 n=texture2D(u14,h),o=texture2D(u15,i),p=n*o*e.x*e.y,k=texture2D(u22,h);gl_FragColor=p*u24*u24+k;}",c:"u14 u15 u17 u23 u24 u25 u22".split(" "),g:{u15:0,
u14:1,u22:2}},s26:{b:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",c:["u14","u15"],g:{u15:0,u14:1}},s27:{b:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",c:["u1","u22","u26"],g:{u1:0,u22:1}},s28:{b:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
c:m,g:z,precision:"lowp"},s29:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",c:["u1","u27"],g:z,precision:"lowp"},s30:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u27"],g:z,precision:"lowp"},s31:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
c:["u1","u2","u28"],g:S},s32:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,a,b;float c,d,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)a=vec2(f,e),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,i+=d*texture2D(u1,b).r,g+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-i/g)*j;}",c:["u1","u2","u28"],g:S},s33:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
c:["u3","u7"],g:L},s34:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",c:["u3","u7"],g:L},s35:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],g:z,precision:"lowp"},s36:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],g:z,precision:"lowp"},s37:{b:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
c:["u1","u29","u30"],g:{u1:0,u29:1,u30:2}}},H={s38:{b:"uniform float u17,u31;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u31*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u17","u14","u15","u22","u31"],Ga:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{b:"uniform float u17,u31,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u31*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u17 u25 u14 u15 u22 u31".split(" "),Ga:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},K={gb:function(){return p},o:function(){if(!p){x="highp";for(var g in G)e(G[g],g);q.set("s0");a.enableVertexAttribArray(0);g=Ha.o();p=!0;return g}},rc:function(g){g.forEach(function(y){K.S(y)})},S:function(g){G[g.id]=g;e(g,g.id)},Qb:function(g,y,C){y||(y=g);G[y]=Object.create(H[g]);G[y].fd=!0;H[g].Ga&&H[g].Ga.forEach(function(R,da){G[y].b=G[y].b.replace(new RegExp(R,"g"),C[da])});e(G[y],y)},set:function(g){l(G[g])},
Tc:function(g){return"undefined"===typeof G[g]?!1:G[g].bb},ra:function(){-1!==r&&(r=-1,f.ma.forEach(function(g){0!==g&&a.disableVertexAttribArray(g)}))},rb:function(){var g=0;f.ma.forEach(function(y,C){C=f.Z[C];a.vertexAttribPointer(y,C,a.FLOAT,!1,f.ub,g);g+=4*C})},Qc:function(){a.enableVertexAttribArray(0)},Ha:function(){a.vertexAttribPointer(f.ma[0],2,a.FLOAT,!1,8,0)},xe:function(g,y){a.uniform1i(f.l[g],y)},u:function(g,y){a.uniform1f(f.l[g],y)},I:function(g,y,C){a.uniform2f(f.l[g],y,C)},V:function(g,
y){a.uniform2fv(f.l[g],y)},ye:function(g,y){a.uniform3fv(f.l[g],y)},Ed:function(g,y,C,R){a.uniform3f(f.l[g],y,C,R)},ze:function(g,y,C,R,da){a.uniform4f(f.l[g],y,C,R,da)},qb:function(g,y){a.uniform4fv(f.l[g],y)},Ae:function(g,y){a.uniformMatrix2fv(f.l[g],!1,y)},Be:function(g,y){a.uniformMatrix3fv(f.l[g],!1,y)},Ce:function(g,y){a.uniformMatrix4fv(f.l[g],!1,y)},C:function(g,y){K.set(g);y.forEach(function(C){switch(C.type){case "4f":a.uniform4fv(f.l[C.name],C.value);break;case "3f":a.uniform3fv(f.l[C.name],
C.value);break;case "2f":a.uniform2fv(f.l[C.name],C.value);break;case "1f":a.uniform1f(f.l[C.name],C.value);break;case "1i":a.uniform1i(f.l[C.name],C.value);break;case "mat2":a.uniformMatrix2fv(f.l[C.name],!1,C.value);break;case "mat3":a.uniformMatrix3fv(f.l[C.name],!1,C.value);break;case "mat4":a.uniformMatrix4fv(f.l[C.name],!1,C.value)}})},ee:function(){return"lowp"},i:function(){a.disableVertexAttribArray(0);K.ra();for(var g in G){var y=G[g];y.bb&&(y.bb=!1,a.deleteProgram(y.pa));y.fd&&delete G[g]}n.forEach(function(C){a.deleteShader(C)});
n.splice(0);t=0;p=!1}};return K}(),a=null,Ja=function(){function b(m){console.log("ERROR in ContextFeedForward: ",m);return!1}function c(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)return!0;if(/(Mac)/i.test(navigator.platform)){var m;(m=navigator.userAgent)?(m=m.match(/Mac OS X (\d+)_(\d+)/)||m.match(/Mac OS X (\d+).(\d+)/),m=!m||3>m.length?!1:[parseInt(m[1],10),parseInt(m[2],10)]):m=!1;if(m&&10===m[0]&&15===m[1])return!0}return!1}var e=null,l=null,n=null,r=null,f=!0,t=null,
p=null,x={j:function(){return e.width},O:function(){return e.height},Xd:function(){return e},Wd:function(){return a},B:function(){return f},flush:function(){a.flush()},Xc:function(){t||(t=new Uint8Array(e.width*e.height*4));a.readPixels(0,0,e.width,e.height,a.RGBA,a.UNSIGNED_BYTE,t);return t},Zd:function(){return e.toDataURL("image/jpeg")},$d:function(){I.G();l||(l=document.createElement("canvas"),n=l.getContext("2d"));l.width=e.width;l.height=e.height;for(var m=x.Xc(),u=n.createImageData(l.width,
l.height),z=l.width,B=l.height,S=u.data,L=0;L<B;++L)for(var G=B-L-1,H=0;H<z;++H){var K=4*(L*z+H),g=4*(G*z+H);S[K]=m[g];S[K+1]=m[g+1];S[K+2]=m[g+2];S[K+3]=m[g+3]}n.putImageData(u,0,0);return l.toDataURL("image/png")},Yd:function(m){!l&&m&&(l=document.createElement("canvas"),n=l.getContext("2d"));var u=m?l:document.createElement("canvas");u.width=e.width;u.height=e.height;(m?n:u.getContext("2d")).drawImage(e,0,0);return u},o:function(m){m.Ic&&!m.Oa?e=document.getElementById(m.Ic):m.Oa&&(e=m.Oa);e||
(e=document.createElement("canvas"));e.width=m&&void 0!==m.width?m.width:512;e.height=m&&void 0!==m.height?m.height:512;"undefined"===typeof m&&(m={});void 0===m.premultipliedAlpha&&(m.premultipliedAlpha=!1);void 0===m.Tb&&(m.Tb=!0);void 0===m.antialias&&(m.antialias=!1);if(!a){var u={antialias:m.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:m.premultipliedAlpha,stencil:!1,depth:m.Tb};c()||(a=e.getContext("webgl2",u));a?f=!0:((a=e.getContext("webgl",u))||(a=e.getContext("experimental-webgl",
u)),f=!1)}if(!a)return b("WebGL is not enabled");(r=a.getExtension("WEBGL_lose_context"))&&m.Zb&&(p=m.Zb,e.addEventListener("webglcontextlost",p,!1));if(!Ia.o())return b("Not enough capabilities");if(!Ia.Cc()&&f)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.disable(a.SCISSOR_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);
a.disable(a.SAMPLE_COVERAGE);return!0},cd:function(){if(!q.o())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0},i:function(){a&&Ia.i();r&&p&&(e.removeEventListener("webglcontextlost",p,!1),p=null);t=n=l=e=null}};return x}(),Fa=function(){var b="undefined"===typeof q?null:q;return{Dd:function(c){b!==c&&(b&&b.ra(),b=c)},gb:function(){return b.gb()},Ha:function(){b.Ha()},rb:function(){b.rb()},ra:function(){b.ra()},set:function(c){b.set(c)},i:function(){b.i&&b.i()}}}(),O=function(){var b=null,
c=null,e=0,l=-2,n=-2,r=!1,f=[],t={reset:function(){n=l=-2},o:function(){r||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),c=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),t.ua(),r=!0)},instance:function(p){var x=e++,m=p.ba?p.ba.length:0,u="undefined"===typeof p.mode?a.STATIC_DRAW:p.mode,z=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,
z);a.bufferData(a.ARRAY_BUFFER,p.jc instanceof Float32Array?p.jc:new Float32Array(p.jc),u);l=x;var B=null,S=null,L=null;if(p.ba){B=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,B);var G=null;65536>p.ba.length?(G=Uint16Array,S=a.UNSIGNED_SHORT,L=2):(G=Uint32Array,S=a.UNSIGNED_INT,L=4);a.bufferData(a.ELEMENT_ARRAY_BUFFER,p.ba instanceof G?p.ba:new G(p.ba),u);n=x}var H={Bc:function(K){l!==x&&(a.bindBuffer(a.ARRAY_BUFFER,z),l=x);K&&Fa.rb()},yc:function(){n!==x&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
B),n=x)},bind:function(K){H.Bc(K);H.yc()},Nc:function(){a.drawElements(a.TRIANGLES,m,S,0)},Ud:function(K,g){a.drawElements(a.TRIANGLES,K,S,g*L)},remove:function(){a.deleteBuffer(z);p.ba&&a.deleteBuffer(B);H=null}};f.push(H);return H},ua:function(){-1!==l&&(a.bindBuffer(a.ARRAY_BUFFER,b),l=-1);-1!==n&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c),n=-1)},f:function(p,x){p&&O.ua();x&&Fa.Ha();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},Kb:function(){a.deleteBuffer(b);a.deleteBuffer(c)},i:function(){t.Kb();
f.forEach(function(p){p.remove()});a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);t.reset();r=!1;f.splice(0);e=0}};return t}(),I=function(){var b=null,c=null,e=null,l=!1,n=[],r={D:-2,Ib:1},f={o:function(){if(!l){b=a.createFramebuffer();var t=Ia.B();c=t&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;e=t&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;l=!0}},be:function(){return c},Ya:function(){return e},ha:function(){return a.FRAMEBUFFER},fe:function(){return r},
Vd:function(){return b},instance:function(t){void 0===t.Sb&&(t.Sb=!1);var p=t.J?t.J:null,x=t.width,m=void 0!==t.height?t.height:t.width,u=b,z=null,B=!1,S=!1,L=0;p&&(x=x?x:p.j(),m=m?m:p.O());var G={fc:function(){B||(u=a.createFramebuffer(),B=!0,L=r.Ib++)},qc:function(){G.fc();G.m();z=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,z);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,x,m);a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,z);a.clearDepth(1)},bind:function(H,
K){L!==r.D&&(a.bindFramebuffer(c,u),r.D=L);p&&p.m();K&&a.viewport(0,0,x,m);H&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Nd:function(){L!==r.D&&(a.bindFramebuffer(c,u),r.D=L)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},Rd:function(){a.clear(a.COLOR_BUFFER_BIT)},Sd:function(){a.clear(a.DEPTH_BUFFER_BIT)},Fd:function(){a.viewport(0,0,x,m)},m:function(){L!==r.D&&(a.bindFramebuffer(c,u),r.D=L)},rtt:function(H){p=H;r.D!==L&&(a.bindFramebuffer(a.FRAMEBUFFER,u),r.D=L);H.m()},G:function(){a.bindFramebuffer(c,
null);r.D=-1},resize:function(H,K){x=H;m=K;z&&(a.bindRenderbuffer(a.RENDERBUFFER,z),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,x,m))},remove:function(){u===b||S||(a.bindFramebuffer(c,u),a.framebufferTexture2D(c,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),z&&a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null),a.bindFramebuffer(c,null),a.deleteFramebuffer(u),z&&a.deleteRenderbuffer(z));S=!0}};t.Sb&&G.qc();n.push(G);return G},G:function(){a.bindFramebuffer(c,null);r.D=-1},
Jd:function(){a.bindFramebuffer(c,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,Ia.j(),Ia.O());r.D=-1},reset:function(){r.D=-2},N:function(){0!==r.D&&(a.bindFramebuffer(c,b),r.D=0)},clear:function(){a.viewport(0,0,Ia.j(),Ia.O());a.clear(a.COLOR_BUFFER_BIT)},i:function(){f.G();n.forEach(function(t){t.remove()});a.deleteFramebuffer(b);f.reset();l=!1;n.splice(0);r.D=-2;r.Ib=1}};return f}(),W=function(){function b(v){a.bindTexture(a.TEXTURE_2D,v)}function c(v){fa[0]=v;v=ia[0];var J=
v>>16&32768,h=v>>12&2047,k=v>>23&255;return 103>k?J:142<k?J|31744|((255==k?0:1)&&v&8388607):113>k?(h|=2048,J|(h>>114-k)+(h>>113-k&1)):J=(J|k-112<<10|h>>1)+(h&1)}function e(v){var J=new Uint16Array(v.length);v.forEach(function(h,k){J[k]=c(h)});return J}function l(){if(null!==la.$a)return la.$a;var v=r(e([1,1,1,1]));return null===v?!0:la.$a=v}function n(){if(null!==la.ab)return la.ab;var v=r(new Uint8Array([255,255,255,255]));return null===v?!0:la.ab=v}function r(v){if(!Fa.gb()||!L)return null;var J=
null;try{var h=a.getError();J=D.instance({isFloat:!1,L:!0,array:v,width:1});h=a.getError();if(h!==a.NO_ERROR)return!1}catch(k){return!1}I.G();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Fa.set("s0");J.yb(0);O.f(!1,!0);v=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,v);v=.9<v[0];J.remove();I.N();return v}var f=0,t=null,p=0,x=null,m=null,u=null,z=null,B=null,S=null,L=!1,G=[],H={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,
isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,H:null,ed:!1,L:!1,$:null,Ba:4,hb:0},K=!1,g=null,y=null,C=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],R=!1,da=!1,fa=new Float32Array(1),ia=new Int32Array(fa.buffer),la={$a:null,ab:null},D={o:function(){if(!L){B=[a.RGB,!1,a.RGB,a.RGBA];S=[a.RGB,!1,a.RGB,a.RGBA];t=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];R="undefined"!==typeof JEContext;da="undefined"!==typeof Ia;
R&&JEContext.se()&&t.push(a.TEXTURE8,a.TEXTURE9);x=[-1,-1,-1,-1,-1,-1,-1,-1];z=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!m){for(var v=new Float32Array(16384),J=0;16384>J;++J)v[J]=2*Math.random()-1;m={random:D.instance({isFloat:!0,isPot:!0,array:v,width:64}),ic:D.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}L=!0}},bd:function(){D.Kd()},je:function(){return m.ic},Kd:function(){z[1]=Ia.Aa()},yd:function(){S=B=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},vd:function(v,J){q.set("s1");I.G();var h=
v.j(),k=v.O();a.viewport(0,0,h,k);v.a(0);O.f(!1,!1);a.readPixels(0,0,h,k,a.RGBA,a.UNSIGNED_BYTE,J)},Vc:function(v,J,h){a.activeTexture(a.TEXTURE0);f=0;var k=a.createTexture();b(k);var ja=Ia.B()&&a.RGBA32F?a.RGBA32F:a.FLOAT;J=J instanceof Float32Array?J:new Float32Array(J);var ra=Math.log2(J.length);ra!==Math.floor(ra)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,h);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,v.j(),v.O(),0,a.RGBA,ja,J);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);I.N();q.set("s0");v.A();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(k);O.f(!0,!1);a.deleteTexture(k)},instance:function(v){function J(){b(Y);ma&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ma);h.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,h.isMirrorX?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,h.isMirrorY?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));h.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.ae().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Md);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,h.isLinear?a.LINEAR:a.NEAREST);h.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,h.isMipmap&&!na?a.NEAREST_MIPMAP_LINEAR:
a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,h.isMipmap&&!na?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);E=B[h.Ba-1];Q=S[h.Ba-1];T=z[ja];if(Ia.B()){var A=a.RGBA32F;E===a.RGBA&&T===a.FLOAT&&A&&(Q=A);E===a.RGB&&T===a.FLOAT&&A&&(Q=A,E=a.RGBA)}if(h.L&&!h.isFloat||h.isFloat&&h.isMipmap&&Ha.jd())(A=a.RGBA16F)&&(Q=A),T=Ia.Aa();h.hb&&(Aa=h.hb);h.isSrgb&&4===h.Ba&&(E=JEContext.he());if(h.H)a.texImage2D(a.TEXTURE_2D,0,Q,E,T,h.H);else if(h.url)a.texImage2D(a.TEXTURE_2D,0,Q,E,T,P);else if(U){try{a.getError(),
a.texImage2D(a.TEXTURE_2D,0,Q,M,N,0,E,T,U),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,Q,M,N,0,E,T,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,M,N,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(oa){a.texImage2D(a.TEXTURE_2D,0,Q,M,N,0,E,T,null)}h.isKeepArray||(U=null)}else a.texImage2D(a.TEXTURE_2D,0,Q,M,N,0,E,T,null);if(h.isMipmap)if(!na&&Z)Z.Xa(),V=!0;else if(na){A=Math.log(Math.min(M,N))/Math.log(2);va=Array(1+A);va[0]=Y;for(var d=1;d<=A;++d){var w=Math.pow(2,d),F=M/w;
w=N/w;var aa=a.createTexture();b(aa);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,Q,F,w,0,E,T,null);b(null);va[d]=aa}V=!0}b(null);x[f]=-1;ma&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);ba=!0;h.$&&Z&&(h.$(Z),h.$=null)}var h=Object.assign({},H,v),k=p++;null===h.isFlipY&&(h.isFlipY=h.url||h.array?!0:!1);h.data&&(h.array="string"===typeof h.data?Ea(h.data):h.isFloat?new Float32Array(h.data):new Uint8Array(h.data),
h.isFlipY=!1);var ja=0,ra=h.H?!0:!1,pa=null,wa=null,ca=!1,X=null;h.L=h.L||h.isFloat;h.L&&(ja=1);h.ed||Ia.B()||!h.isFloat||!da||Ia.Ab()||(h.isFloat=!1);h.isFloat&&(ja=2);h.isAnisotropicFiltering&&R&&!JEContext.me()&&(h.isAnisotropicFiltering=!1);var Y=a.createTexture(),P=null,U=!1,M=0,N=0,ba=!1,ea=!1,ka=null,qa=null,xa=null,ua=null,Q=null,E=null,T=null,ma=h.isFlipY,na=h.L&&h.isMipmap&&"undefined"!==typeof Ha&&!Ha.Ec()?!0:!1,va=null,Aa=-1,V=!1,sa={Ub:!1,zb:null,Jb:null};h.width&&(M=h.width,N=h.height?
h.height:M);var Z={get:function(){return Y},j:function(){return M},O:function(){return N},ke:function(){return h.url},oe:function(){return h.isFloat},qe:function(){return h.L},re:function(){return h.isLinear},Xa:function(){a.generateMipmap(a.TEXTURE_2D)},Ac:function(A,d){na?(A||(A=Z.Nb()),Z.Ka(d),b(va[A]),x[d]=-1):Z.a(d)},Nb:function(){-1===Aa&&(Aa=Math.log(M)/Math.log(2));return Aa},Wc:function(A){if(na){A||(A=Z.Nb());q.set("s11");Z.Ka(0);for(var d=M,w=N,F=1;F<=A;++F)d/=2,w/=2,q.I("u7",.25/d,.25/
w),a.viewport(0,0,d,w),b(va[F-1]),a.framebufferTexture2D(I.ha(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,va[F],0),O.f(!1,1===F);x[0]=-1}else Z.Xa()},Ka:function(A){A!==f&&(a.activeTexture(t[A]),f=A)},a:function(A){if(!ba)return!1;Z.Ka(A);if(x[A]===k)return!1;b(Y);x[A]=k;return!0},yb:function(A){a.activeTexture(t[A]);f=A;b(Y);x[A]=k},m:function(){u=Z;a.framebufferTexture2D(I.ha(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Y,0)},A:function(){u=Z;a.viewport(0,0,M,N);a.framebufferTexture2D(I.ha(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,
Y,0)},tb:D.tb,resize:function(A,d){M=A;N=d;J()},clone:function(A){A=D.instance({width:M,height:N,L:h.L,isFloat:h.isFloat,isLinear:h.isLinear,isMirrorY:h.isMirrorY,isFlipY:A?!ma:ma,isPot:h.isPot});Fa.set("s0");I.N();A.m();a.viewport(0,0,M,N);Z.a(0);O.f(!0,!0);return A},Fd:function(){a.viewport(0,0,M,N)},remove:function(){a.deleteTexture(Y);G.splice(G.indexOf(Z),1);Z=null},refresh:function(){Z.yb(0);ma&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);ra?a.texImage2D(a.TEXTURE_2D,0,Q,E,a.UNSIGNED_BYTE,h.H):
a.texImage2D(a.TEXTURE_2D,0,Q,M,N,0,E,T,U);ma&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Bb:function(){var A=M*N*4;qa=[new Uint8Array(A),new Uint8Array(A),new Uint8Array(A),new Uint8Array(A)];ka=[new Float32Array(qa[0].buffer),new Float32Array(qa[1].buffer),new Float32Array(qa[2].buffer),new Float32Array(qa[3].buffer)];xa=new Uint8Array(4*A);ua=new Float32Array(xa.buffer);ea=!0},ec:function(){ea||Z.Bb();a.readPixels(0,0,M,4*N,a.RGBA,a.UNSIGNED_BYTE,xa);for(var A=M*N,d=2*A,w=3*A,F=0;F<A;++F)ka[0][F]=
ua[F],ka[1][F]=ua[F+A],ka[2][F]=ua[F+d],ka[3][F]=ua[F+w];return ka},ud:function(){sa.Ub||(sa.zb=new Uint8Array(M*N*4),sa.Jb=new Float32Array(sa.buffer),sa.Ub=!0);a.readPixels(0,0,M,N,a.RGBA,a.UNSIGNED_BYTE,sa.zb);return sa.Jb},Fb:function(A){I.G();q.set("s12");Z.a(0);if(A)a.viewport(0,0,M,N),q.qb("u8",.25,.25,.25,.25),O.f(!1,!0);else for(A=0;4>A;++A)a.viewport(0,N*A,M,N),q.qb("u8",C[A]),O.f(!1,0===A)},Fe:function(A){var d=T===z[0]&&!n();b(Y);ma&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);d?(ca||(pa=
document.createElement("canvas"),pa.width=M,pa.height=N,wa=pa.getContext("2d"),X=wa.createImageData(M,N),ca=!0),X.data.set(A),wa.putImageData(X,0,0),a.texImage2D(a.TEXTURE_2D,0,Q,E,T,pa)):a.texImage2D(a.TEXTURE_2D,0,Q,M,N,0,E,T,A);x[f]=k;ma&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Ge:function(A,d){b(Y);d&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,Q,E,T,A);x[f]=k;d&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},ve:function(A,d){var w=M*N,F=4*w;A=h.L?A?"RGBE":"JSON":"RGBA";d&&
(A=d);d=Ia.B()&&!1;var aa=null;switch(A){case "RGBE":aa="s40";break;case "JSON":aa=d?"s0":"s12";break;case "RGBA":case "RGBAARRAY":aa="s6"}ea||("RGBA"===A||"RGBE"===A||"RGBAARRAY"===A?(qa=new Uint8Array(F),ea=!0):"JSON"!==A||d||Z.Bb());I.G();q.set(aa);Z.a(0);F=null;if("RGBA"===A||"RGBE"===A||"RGBAARRAY"===A){a.viewport(0,0,M,N);O.f(!0,!0);a.readPixels(0,0,M,N,a.RGBA,a.UNSIGNED_BYTE,qa);if("RGBAARRAY"===A)return{data:qa};K||(g=document.createElement("canvas"),y=g.getContext("2d"),K=!0);g.width=M;g.height=
N;w=y.createImageData(M,N);w.data.set(qa);y.putImageData(w,0,0);F=g.toDataURL("image/png")}else if("JSON"===A)if(d)F=new Float32Array(w),a.viewport(0,0,M,N),O.f(!0,!0),a.readPixels(0,0,M,N,a.RGBA,a.FLOAT,F);else{for(F=0;4>F;++F)a.viewport(0,N*F,M,N),q.qb("u8",C[F]),O.f(!F,!F);Z.ec();F=Array(w);for(d=0;d<w;++d)F[4*d]=ka[0][d],F[4*d+1]=ka[1][d],F[4*d+2]=ka[2][d],F[4*d+3]=ka[3][d]}return{format:A,data:F,width:M,height:N,isMirrorY:h.isMirrorY,isFlipY:"RGBA"===A?h.isFlipY:!h.isFlipY}}};h.isMipmap&&!na&&
ba&&!V&&(Z.Xa(),V=!0);if(h.url)b(Y),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),P=new Image,P.Td="Anonymous",P.crossOrigin="Anonymous",P.src=h.url,P.onload=function(){M=P.width;N=P.height;J()};else if(h.H){var Ca=function(){M=void 0!==h.H.videoWidth?h.H.videoWidth:h.H.width;N=void 0!==h.H.videoHeight?h.H.videoHeight:h.H.height;M?J():setTimeout(Ca,1)};Ca()}else h.array?(h.L&&!h.isFloat?h.array instanceof Uint16Array?(U=h.array,J()):l()?(U=e(h.array),J()):(J(),D.Vc(Z,h.array,
ma)):(U=h.isFloat?h.array instanceof Float32Array?h.array:new Float32Array(h.array):h.array instanceof Uint8Array?h.array:new Uint8Array(h.array),J()),h.isKeepArray||(U&&U!==h.array&&(U=null),delete h.array)):J();Z.ge=Z.j;h.$&&ba&&(h.$(Z),h.$=null);G.push(Z);return Z},G:function(v){v!==f&&(a.activeTexture(t[v]),f=v);x[v]=-1;b(null)},Pd:function(v){m.random.a(v)},tb:function(){u=null;a.framebufferTexture2D(I.ha(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},reset:function(){for(var v=0;v<t.length;++v)x[v]=
-1;f=-1},ue:function(){f=-1},Id:function(){for(var v=0;v<t.length;++v)D.G(v)},Kb:function(){m&&(m.random.remove(),m.ic.remove())},Ee:function(v,J){if("RGBA"===v.format||"RGBE"===v.format){var h=new Image;h.src=v.data;h.onload=function(){D.instance({isMirrorY:v.isMirrorY,isFlipY:v.isFlipY,isFloat:!1,H:h,$:function(k){if("RGBA"===v.format)J(k);else{var ja=v.width,ra=v.height,pa=D.instance({isMirrorY:v.isMirrorY,isFloat:!0,width:ja,height:ra,isFlipY:v.isFlipY});I.N();a.viewport(0,0,ja,ra);q.set("s41");
pa.m();k.a(0);O.f(!0,!0);D.G(0);J(pa);a.flush();setTimeout(k.remove,50)}}})}}else"JSON"===v.format?J(D.instance({isFloat:!0,isFlipY:v.isFlipY,width:v.width,height:v.height,array:new Float32Array(v.data)})):J(!1)},i:function(){u&&(I.N(),D.tb(),I.G());D.Id();G.slice(0).forEach(function(v){v.remove()});G.splice(0);L=!1;p=0;Ha.i()}};return D}(),Ka={instance:function(b){var c=[W.instance(b),W.instance(b)],e=[c[1],c[0]],l=e,n={Cd:function(r){l[1].m();l[0].a(r);n.hc()},we:function(r){l[1].A();l[0].a(r);
n.hc()},hc:function(){l=l===c?e:c},refresh:function(){l[0].refresh();l[1].refresh()},a:function(r){l[0].a(r)},Od:function(r){l[1].a(r)},ce:function(){return l[0]},remove:function(){l[0].remove();l[1].remove();l=null}};return n}},Ia=function(){function b(){c="undefined"===typeof Ja?JEContext:Ja;e=!0}var c=null,e=!1,l=!1,n=null,r=null,f=!1,t=null,p=!1,x=null,m=!1,u=null,z=!1,B=!0,S=!0,L=!0,G=null,H="undefined"===typeof window?{}:window,K={o:function(){if(e)return!0;b();K.Gb();K.Va();K.Rc();K.Sc();I.o();
W.o();if(!K.Kc())return!1;O.o();W.bd();return!0},j:function(){e||b();return c.j()},O:function(){e||b();return c.O()},B:function(){e||b();return c.B()},Rc:function(){z=(u=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;H.GL_EXT_COLORBUFFERFLOAT=u},Sc:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},Gb:function(){if(!l){this.B()||
(n=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),f=(H.GL_EXT_FLOAT=n)?!0:!1);if(f||this.B())r=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),H.GL_EXT_FLOATLINEAR=r;l=!0}},Va:function(){if(!m){if(!this.B()){if(t=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))G=
t.HALF_FLOAT_OES,p=!0;!G&&a.HALF_FLOAT&&(G=a.HALF_FLOAT);!G&&a.FLOAT&&(G=a.FLOAT);H.GL_EXT_HALFFLOAT=t}if(p||this.B())x=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),H.GL_EXT_HALFFLOATLINEAR=x;m=!0}},Aa:function(){if(K.B())return a.HALF_FLOAT;K.Va();return p?G:a.FLOAT},Ab:function(){return B},Dc:function(){return S},Qd:function(){return L},Cc:function(){return z},Mc:function(){S=B=!0;var g=
a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,g);var y=a.createTexture();a.bindTexture(a.TEXTURE_2D,y);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,K.B()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(I.ha(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,y,0);var C=a.checkFramebufferStatus(I.Ya());C!==a.FRAMEBUFFER_COMPLETE&&(B=!1);a.texImage2D(a.TEXTURE_2D,0,K.B()&&a.RGBA16F?
a.RGBA16F:a.RGBA,1,1,0,a.RGBA,K.Aa(),null);a.framebufferTexture2D(I.ha(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,y,0);C=a.checkFramebufferStatus(I.Ya());C!==a.FRAMEBUFFER_COMPLETE&&(S=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(y);a.deleteFramebuffer(g)},Lc:function(){var g=I.instance({width:1});g.fc();var y=W.instance({width:1,isFloat:!0,Ba:3});g.m();y.m();a.flush();a.checkFramebufferStatus(I.Ya())!==a.FRAMEBUFFER_COMPLETE?(W.yd(),L=!1):L=!0;g.remove();y.remove()},
Kc:function(){K.Mc();if(!B&&!S)return!1;K.Lc();return!0},i:function(){W.i();Fa.i();I.i();O.i();e=!1}};return K}(),Ha=function(){function b(B,S,L,G){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,G?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);var H=null;try{if(H=a.getError(),H!==a.NO_ERROR&&console.log("GLERR in test_mipmapping():",H),a.texImage2D(a.TEXTURE_2D,0,B,2,2,0,a.RGBA,S,L),H=a.getError(),H!==a.NO_ERROR)return!1}catch(K){return!1}G&&a.generateMipmap(a.TEXTURE_2D);O.ua();O.f(!1,!0);a.readPixels(0,
0,1,1,a.RGBA,a.UNSIGNED_BYTE,f);H=a.getError();H===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,f),H=a.getError());return H!==a.NO_ERROR?!1:0!==f[0]}function c(B){return Ia.Ab()&&b(m,a.FLOAT,new Float32Array(p),B)?(r=n.wb,!0):!1}function e(B){return Ia.Dc()?b(u,Ia.Aa(),new Uint16Array(p),B)||b(u,a.FLOAT,new Float32Array(p),B)?(r=n.Ja,!0):!1:!1}var l=!1,n={wb:3,Ja:2,RGBA8:0},r=n.RGBA8,f=new Uint8Array(4),
t=[.8,1,.8,1],p=t.concat(t,t,t),x=!0,m=null,u=null,z={o:function(){Ia.Gb();Ia.Va();u=m=a.RGBA;if(Ja.B()){var B=a.RGBA32F;B&&(m=B);(B=a.RGBA16F)&&(u=B)}O.o();I.reset();I.G();a.viewport(0,0,1,1);q.set("s0");l=!0;B=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,B);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(e(!0)||c(!0))return!0;x=!1;if(e(!1)||
c(!1))return!0;if(Ja.B()){u=m=a.RGBA;if(e(!0)||c(!0))return!0;x=!1;if(e(!1)||c(!1))return!0}return!1},Ec:function(){return x},de:function(){return r},pe:function(){l||z.o();return r===n.wb},jd:function(){l||z.o();return r===n.Ja},i:function(){l=!1;r=n.RGBA8;x=!0}};return z}(),La={instance:function(b){var c=W.instance(b.alpha),e=W.instance(b.beta);return{Oc:function(){c.a(1);e.a(2)}}}},Na={instance:function(b){var c=null,e=!1,l=!1,n=null,r=!1,f=!1,t=null,p="undefined"===typeof b.preprocessing?!1:b.preprocessing,
x="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(e=!0,SETTINGS&&void 0!==SETTINGS.wc&&(b.mask=SETTINGS.wc+b.mask),c=W.instance({isFloat:!1,url:b.mask}));var m=!1;b.customInputShader&&(m="s42",q.S({name:"_",id:m,b:b.customInputShader,c:["uSource"],precision:"lowp"}),q.C(m,[{type:"1i",name:"_",value:0}]));switch(p){case "sobel":t="s31";r=!0;break;case "meanNormalization":t="s32";r=!0;break;case "grayScale":t="s28";r=!1;break;case "grayScaleTilt":t="s29";f=!0;r=!1;break;
case "rgbGrayTilt":t="s30";f=!0;r=!1;break;case "copy":t=m?m:"s0";break;case "inputLightRegulation":t=m?m:"s28";n=Ma.instance({Rb:x,ac:b.size,Vb:b.nBlurPass,hd:!1});l=!0;break;case "direct":case "none":t=!1;break;default:t="s3"}f&&q.C(t,[{name:"u27",type:"1f",value:b.tilt}]);e&&(t+="Mask");var u=W.instance({isFloat:!1,isPot:!1,width:b.size}),z={j:function(){return x},Za:function(){return z.j()},Zc:function(){return l?n.Ob():u},M:function(){I.N();t&&(q.set(t),r&&q.u("u28",1/b.size),u.A(),e&&c.a(1),
O.f(!1,!1),u.a(0),l&&n.process(u))},i:function(){u.remove();e&&c.remove()}};return z}},Ua={instance:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var c={input:null,ta:null,cb:null,P:null,Ca:null,jb:null,kb:null},e=null,l=[],n=[],r=!1,f=null,t=!0,p=-1,x=b.isReorganize?b.isReorganize:!1,m=b.kernelsNumber?!0:!1,u=b.dynPelu?La.instance(b.dynPelu):!1,z=u?!0:!1,B={isEnabled:!1};b.gd?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.Da.Za(),t=!1):"full"===b.connectivityUp&&
(b.sparsity=b.Da.Za());var S={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],L=b.sparsity*b.sparsity,G=!1,H=b.size,K="";if(b.maxPooling){switch(b.maxPooling.size){case 2:K="s33";break;case 4:K="s34"}G=!0;H/=b.maxPooling.size;c.jb=W.instance({isFloat:!0,isPot:!1,width:H})}var g=void 0!==b.nd&&b.nd?!0:!1,y=null,C=null,R=null;if(g){y="s43"+b.index.toString();q.Qb("s43",y,[((b.normalization.n-1)/2).toFixed(1)]);q.C(y,[{type:"1i",name:"u1",
value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u32",value:b.normalization.k}]);var da={isFloat:!0,isPot:!0,width:b.size};C=W.instance(da);R=W.instance(da)}var fa=-1,ia=null;t&&(c.P=W.instance({isFloat:!0,isPot:!1,width:b.size}));c.ta=W.instance(b.bias);var la={j:function(){return b.size},Za:function(){return H},Lb:function(){return b.classesCount},zc:function(D){e.a(D)},pd:function(){b.remap&&
b.remap.isEnabled&&(B={isEnabled:!0,ld:W.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(D){return b.parent.Yc(D)}),depth:b.remap.depth})},Ad:function(){switch(b.connectivityUp){case "direct":ia=Pa.instance(b.connectivity);break;case "square":ia=Qa.instance(b.connectivity);break;case "squareFast":ia=Ra.instance(b.connectivity,b.activation);break;case "full":ia=Sa.instance(b.connectivity);break;
case "conv":p=b.kernelsNumber,ia=Ta.instance(b.connectivity),x&&(c.Ca=W.instance({width:H,isFloat:!0,isFlipY:!1,isPot:!1}))}if(ia.ka){var D=b.size*b.sparsity;fa=Math.log(D/b.size)/Math.log(2);c.input=W.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:D,hb:fa});c.cb=W.instance({isFloat:!0,isPot:!0,width:b.size})}},M:function(D){e=D;ia.ka?(c.input.A(),m&&c.ta.a(2),ia.M(B),c.input.a(0),c.input.Wc(fa),c.cb.A(),m?q.set("s0"):(q.set("s27"),q.u("u26",L),c.ta.a(1)),c.input.Ac(fa,0),O.f(!1,!1),q.set(S),g?C.m():
c.P.m(),c.cb.a(0),z&&u.Oc(),O.f(!1,!1)):(c.P.A(),c.ta.a(1),ia.M());g&&(q.set(y),R.m(),C.a(0),O.f(!1,!1),q.set("s44"),q.u("u6",1),c.P.m(),R.a(1),O.f(!1,!1));if(t)return G?(c.jb.A(),c.P.a(0),q.set(K),q.I("u7",1/b.size,1/b.size),O.f(!1,!1),D=c.jb):D=c.P,D.a(0),x&&(c.Ca.m(),q.set("s21"),q.I("u13",p,H/p),O.f(!1,!1),D=c.Ca,c.Ca.a(0)),D;D=c.P;b.disableNormalize||(q.set("gpuRawAvg"===r?"s8":"s7"),q.u("u4",1/b.size),c.kb.A(),c.P.a(0),O.f(!1,!1),D=c.kb);switch(r){case "cpuRGBA2Float":D.Fb(!1);D=la.td(D);f(D);
break;case "cpuMeanFloat":D.Fb(!0);D=D.ud();f(D);break;case "gpuRawAvg":case "gpuRaw":D.a(0);case "none":f(D)}return!1},Hc:function(D){D&&"undefined"!==typeof D.$b&&(r=D.$b,f=D.od);c.P=W.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});D="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var v=0,J=0,h=0;v<D;++v)l.push(J+(b.size-1-h)*b.size),n.push([-1,-1,-1,-1]),++J,J===b.size&&(J=0,++h);b.disableNormalize||(c.kb=W.instance({isFloat:!0,isPot:!0,width:b.size}))},
td:function(D){var v=D.ec();l.forEach(function(J,h){n[h][0]=v[0][J];n[h][1]=v[1][J];n[h][2]=v[2][J];n[h][3]=v[3][J]});return n},i:function(){for(var D in c){var v=c[D];v&&v.remove()}ia&&(ia.i(),ia=null)}};b.Da&&la.Ad(b.Da);return la}};
function Va(){var b=null,c=null,e=null,l=0;this.Yc=function(n){return b[n]};this.xd=function(n){var r=null;l=n.length;b=n.map(function(f,t){f=Object.assign({},f,{index:t,parent:this,Da:r,gd:t===l-1});return r=t=0===t?Na.instance(f):Ua.instance(f)});c=b[0];e=b[l-1];b.forEach(function(f,t){0!==t&&f.pd()})};this.M=function(n,r){var f=r;b.forEach(function(t){f=t.M(f,n)});return f};this.Mb=function(){return c.j()};this.Ob=function(){return e.Zc()};this.zd=function(n){e.Hc(n)};this.Lb=function(){return e.Lb()};
this.i=function(){b&&(b.forEach(function(n){n.i()}),e=c=b=null,l=0)}}
var Pa={instance:function(b){var c=W.instance(b.weights);delete b.weights.data;return{ka:!0,za:function(){return 1},i:function(){c.remove()},$c:function(){return c},M:function(){q.set("s26");c.a(1);O.f(!1,!1)}}}},Sa={instance:function(b){var c=b.fromLayerSize,e=W.instance(b.weights);delete b.weights.data;return{ka:!0,za:function(){return c},i:function(){e.remove()},M:function(l){if(l.isEnabled){q.set("s24");l.ld.a(3);var n,r=Math.min(l.layers.length,l.depth);for(n=0;n<r;++n)l.layers[n].zc(4+n)}else q.set("s23");
q.u("u17",b.toLayerSize);e.a(1);O.f(!1,!1)}}}},Qa={instance:function(b){for(var c=b.fromLayerSize,e=b.toLayerSize,l=b.toSparsity,n=l*e,r=n/c,f=c/e,t=0,p=0,x=0,m=Array(l*e*l*e*4),u=Array(l*e*l*e*4),z=Array(c*c),B=0;B<z.length;++B)z[B]=0;B=Math.floor(l/2);for(var S=.5/e,L=.5/c,G=.5/n,H=0;H<e;++H)for(var K=Math.round(H*f),g=0;g<e;++g){var y=Math.round(g*f),C=H/e,R=g/e;C+=S;R+=S;for(var da=0;da<l;++da){var fa=K+da-B;0>fa&&(fa+=c);fa>=c&&(fa-=c);for(var ia=0;ia<l;++ia){var la=t/n,D=p/n,v=y+ia-B;0>v&&(v+=
c);v>=c&&(v-=c);var J=fa/c,h=v/c;D=1-D-1/n;J+=L;h+=L;la+=G;D+=G;var k=H*l+da,ja=g*l+ia;ja=e*l-ja-1;k=ja*e*l+k;m[4*k]=la;m[4*k+1]=D;m[4*k+2]=J;m[4*k+3]=h;h=z[v*c+fa]++;k=h%r;J=fa*r+k;v=v*r+(h-k)/r;v=c*r-1-v;v=v*c*r+J;u[4*v]=la;u[4*v+1]=D;u[4*v+2]=C;u[4*v+3]=R;++t>=n&&(t=0,++p);++x}}}z=null;var ra=W.instance(b.weights);delete b.weights.data;var pa=W.instance({width:n,isFloat:!0,array:new Float32Array(u),isPot:!0});u=null;var wa=W.instance({width:n,isFloat:!0,array:new Float32Array(m),isPot:!0});m=null;
return{ka:!0,za:function(){return r},i:function(){pa.remove();wa.remove();ra.remove()},M:function(){q.set("s22");ra.a(1);wa.a(2);O.f(!1,!1)}}}},Ta={instance:function(b){var c=b.kernelsNumber,e=b.toSparsity,l=e*b.toLayerSize/b.fromLayerSize,n=W.instance(b.weights);delete b.weights.data;return{ka:!0,za:function(){return l},ie:function(){return e},$c:function(){return n},i:function(){n.remove()},M:function(){q.set("s25");q.u("u23",c);q.u("u24",e);q.u("u17",b.toLayerSize);q.u("u25",b.fromLayerSize);n.a(1);
O.f(!1,!1)}}}},Ra={instance:function(b,c){var e=b.fromLayerSize,l=b.toLayerSize,n=b.toSparsity,r=b.stride?b.stride:1,f=n*l/e,t=l<e,p=e/l,x=W.instance(b.weights);delete b.weights.data;var m="s45"+[e.toString(),l.toString(),n.toString(),r.toString(),c].join("_");q.Tc(m)||(b=Ba(c),l=[{type:"1f",name:"u17",value:l},{type:"1f",name:"u31",value:r}],t&&l.push({type:"1f",name:"u25",value:e}),e=[(t?f:n).toFixed(1),b],t&&e.push(p.toFixed(1)),q.Qb(t?"s39":"s38",m,e),q.C(m,l.concat([{type:"1i",name:"u15",value:0},
{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{ka:!1,za:function(){return f},i:function(){x.remove()},M:function(){q.set(m);x.a(3);O.f(!1,!1)}}}},Ma={instance:function(b){var c=b.Vb?b.Vb:3,e=b.Rb?b.Rb:64,l=b.ac?b.ac:64,n=b.hd?!0:!1;b={isFloat:!1,width:e,isPot:!1,isFlipY:!1};var r=W.instance(b),f=W.instance(b),t=W.instance(b),p=W.instance(b),x=W.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),m=1/e;return{process:function(u){q.set("s35");p.m();O.f(n,!1);q.set("s36");for(var z=
0;z<c;++z)r.m(),q.I("u7",m,0),O.f(n,!1),t.m(),p.a(0),O.f(n,!1),f.m(),r.a(0),q.I("u7",0,m),O.f(n,!1),p.m(),t.a(0),O.f(n,!1),z!==c-1&&f.a(0);q.set("s37");x.m();u.a(0);f.a(1);p.a(2);O.f(n,!1);x.a(0)},Ob:function(){return x}}}},Wa=function(){function b(f){I.G();q.set("s1");a.viewport(0,0,1,1);O.f(!1,!1);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,f);I.N()}var c=!1,e=!1,l,n,r={o:function(){var f={u1:0};q.S({id:"s47",name:"_",b:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u28;const vec3 f=vec3(.3333,.3333,.3333);const vec4 h=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y-u28.y))*1.,a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y+u28.y))*1.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y-u28.y))*1.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y+u28.y))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y-u28.y))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28.y))*2.,b-=texture2D(u1,vec2(vv0.x+u28.x,vv0.y-u28.y))*1.,b+=texture2D(u1,vec2(vv0.x-u28.x,vv0.y+u28.y))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28.y))*2.,b+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y+u28.y))*1.;vec3 e=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 c=texture2D(u1,vv0),g=vec4(e,c.a);gl_FragColor=vec4(dot(g.rgb,f),dot(c.rgb,f),0.,1.);}",
c:["u1","u28"],g:f});q.S({id:"s48",name:"_",b:"uniform sampler2D u1;uniform vec2 u33;uniform float u34,u35,u36,u37;varying vec2 vv0;void main(){vec2 a=floor(vv0*u35);float d=a.x+a.y*u35,g=u35*u35;vec2 h=fract(vv0*u35),b=u36+h*(1.-2.*u36);float c=d/(g-1.),i=mix(u33.x,u33.y,c);vec2 j=b+i*vec2(1.,1./u37)*vec2(cos(u34),sin(u34));float f=texture2D(u1,j).r;gl_FragColor=vec4(f,b,c);}",c:"u1 u33 u34 u35 u36 u37".split(" "),g:f});q.S({id:"s49",name:"_",b:"uniform sampler2D u1;uniform vec2 u7,u38;varying vec2 vv0;void main(){vec4 a=vec4(0.,0.,0.,0.),b;float e;vec2 f=vv0-u7*2.;for(float c=0.;c<3.9;c+=1.)for(float d=0.;d<3.9;d+=1.)b=texture2D(u1,f+u7*vec2(c,d)),e=step(a.r,b.r),a=mix(a,b,e);gl_FragColor=a;}",
c:["u1","u7","u38"],g:f});q.S({id:"s50",name:"_",b:"uniform sampler2D u1;uniform vec2 u39;uniform float u40;const vec4 f=vec4(0.,1.,0.,1.);varying vec2 vv0;void main(){float a=step(abs(distance(vv0,u39)-u40),1e-3);gl_FragColor=mix(texture2D(u1,vv0),f,a);}",c:["u1","u39","u40"],g:f});c=!0},De:function(f){c||r.o();q.set("s47");q.I("u28",.5/f.j(),.5/f.O());f.a(0);O.f(!1,!1)},Nc:function(f){q.set("s50");q.V("u39",f.h);q.u("u40",f.w);O.f(!1,!1)},instance:function(f){c||r.o();var t="undefined"===typeof f.sd?
8:f.sd,p=f.width,x=f.lb,m=[Math.floor(x[0]*p),Math.ceil(x[1]*p)],u=p-2*m[1],z=f.Yb?f.Yb:8,B=Math.ceil(("undefined"===typeof f.dc?1:f.dc)*p);u=Math.min(u,2*B);var S=Math.max(m[1],p/2-B)/p,L="undefined"===typeof f.da?1:f.da,G=W.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:u*t}),H=1/z,K=Math.ceil(Math.log(G.j())/Math.log(4));f=G.j();var g=Array(K);for(p=0;p<K;++p)g[p]=W.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:Math.ceil(f/Math.pow(4,p+1))});var y=new Uint8Array(4),C={w:-1,
h:[0,0],da:L};return{Bd:function(R){L=R},process:function(R){R.a(0);G.A();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);a.enable(a.BLEND);a.blendFunc(a.CONSTANT_ALPHA,a.ONE);a.blendColor(H,H,H,H);q.set("s48");q.V("u33",x);q.u("u35",t);q.u("u36",S);q.u("u37",L);R=0;for(var da;R<z;++R)da=2*R*Math.PI/z,q.u("u34",da),O.f(!1,!1);a.disable(a.BLEND);q.set("s49");G.a(0);R=0;da=G.j();for(var fa;R<K;++R)g[R].A(),fa=g[R].j(),q.I("u38",fa,fa),q.I("u7",1/da,1/da),O.f(!1,!1),g[R].a(0),da=fa;b(y);C.h[0]=y[1]/
255;C.h[1]=y[2]/255;C.w=x[0]+(x[1]-x[0])*y[3]/255;C.da=L;return C}}},ad:function(){l=W.instance({width:256,height:1,isFloat:!0});n=W.instance({width:1,isFloat:!1});var f={u1:0};q.S({id:"s51",name:"_",b:"uniform sampler2D u1;uniform vec2 u33,u39;varying vec2 vv0;void main(){float e=mix(u33.x,u33.y,vv0.x),b=0.,a=0.;vec2 c;for(float d=0.;d<51.;d+=1.)c=e*vec2(cos(a),sin(a)),b+=texture2D(u1,u39+c).r,a+=.123137;gl_FragColor=vec4(b/51.,0.,0.,1.);}",c:["u1","u33"],g:f});q.S({id:"s52",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){float b=0.,c=0.,d=0.,e;for(float a=0.;a<255.9;a+=1.)d=texture2D(u1,vec2(a/255.,.5)).r,e=step(b,d),b=mix(b,d,e),c=mix(c,a,e);gl_FragColor=vec4(c/255.,0.,0.,1.);}",
c:["u1"],g:f});e=!0},le:function(f){e||r.ad();var t="undefined"===typeof f.h?[0,0]:f.h,p="undefined"===typeof f.lb?[0,0]:f.lb,x=new Uint8Array(4),m={h:t,w:0};return{set:function(u,z){t[0]=u[0];t[1]=u[1];p[0]=z[0];p[1]=z[1]},process:function(u){q.set("s51");q.V("u33",p);q.V("u39",t);l.A();u.a(0);O.f(!1,!1);q.set("s52");n.A();O.f(!1,!1);n.a(0);b(x);m.w=p[0]+(p[1]-p[0])*x[0]/255;return m}}}};return r}();function Xa(b,c){b[c]=!0;b.setAttribute(c,"true")}
function Ya(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Za(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function $a(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function ab(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function bb(b){if(!b)return b;var c=!1;if(b.video){var e=function(l){var n={};"undefined"!==typeof l.min&&(n.min=l.min);"undefined"!==typeof l.max&&(n.max=l.max);"undefined"!==typeof l.ideal&&(n.ideal=l.ideal);return n};c={};"undefined"!==typeof b.video.width&&(c.width=e(b.video.width));"undefined"!==typeof b.video.height&&(c.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=b.video.facingMode)}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);
return c}function cb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function db(b){function c(u){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(z,B){return Math.abs(z-u)-Math.abs(B-u)})}function e(u){var z=bb(b);l.push(u(z))}var l=[];if(!b||!b.video)return l;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var n=c(b.video.width.ideal).slice(0,3),r=c(b.video.height.ideal).slice(0,3),f={},t=0;for(f.Y=void 0;t<n.length;f={Y:f.Y},++t){f.Y=n[t];var p={},x=0;for(p.X=void 0;x<r.length;p={X:p.X},++x)if(p.X=r[x],
f.Y!==b.video.width.ideal||p.X!==b.video.height.ideal){var m=Math.max(f.Y,p.X)/Math.min(f.Y,p.X);m<4/3-.1||m>16/9+.1||e(function(u,z){return function(B){B.video.width.ideal=u.Y;B.video.height.ideal=z.X;return B}}(f,p))}}}e(function(u){return cb(u)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(u){delete u.video.width.ideal;delete u.video.height.ideal;return u}),e(function(u){delete u.video.width;delete u.video.height;return u}));b.video.facingMode&&(e(function(u){delete u.video.facingMode;
return u}),b.video.width&&b.video.height&&e(function(u){cb(u);delete u.video.facingMode;return u}));l.push({audio:b.audio,video:!0});return l}function eb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(l){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var e=b.video.height;c&&e&&c.ideal&&e.ideal&&c.ideal>e.ideal&&(b.video.height=c,b.video.width=e)}}
function fb(b){b.volume=0;Xa(b,"muted");if($a()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Xa(b,"muted")},5)}}
function gb(b,c,e,l){function n(f){r||(r=!0,e(f))}var r=!1;navigator.mediaDevices.getUserMedia(l).then(function(f){function t(){setTimeout(function(){if(b.currentTime){var p=b.videoWidth,x=b.videoHeight;if(0===p||0===x)n("VIDEO_NULLSIZE");else{p&&(b.style.width=p.toString()+"px");x&&(b.style.height=x.toString()+"px");p={Fc:null,Gd:null,md:null};try{var m=f.getVideoTracks()[0];m&&(p.md=m,p.Fc=m.getCapabilities(),p.Gd=m.getSettings())}catch(u){}$a()||Ya()?b.parentNode&&null!==b.parentNode?(r||c(b,f,
p),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),fb(b),r||c(b,f,p),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";fb(b);setTimeout(function(){b.play()},100)},80)):r||c(b,f,p)}}else n("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=f:(b.src=window.URL.createObjectURL(f),b.videoStream=f);fb(b);b.addEventListener("loadeddata",function(){var p=b.play();fb(b);"undefined"===typeof p?
t():p.then(function(){t()}).catch(function(){n("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(f){n(f)})}
function hb(b,c,e){var l=ab()?document.createElement("video"):!1;if(l)if(ab()){if(e&&e.video){if(Ya()){var n=Za();(12>n[0]||12===n[0]&&2>n[1])&&eb(e)}e.video.width&&e.video.width.ideal&&(l.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(l.style.height=e.video.height.ideal+"px")}Xa(l,"autoplay");Xa(l,"playsinline");e&&e.audio?l.volume=0:Xa(l,"muted");gb(l,b,function(){function r(t){if(0===t.length)c("INVALID_FALLBACKCONSTRAINTS");else{var p=t.shift();gb(l,b,function(){r(t)},
p)}}var f=db(e);r(f)},e)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
window.JEEPUPILAPI=function(){var b,c,e,l,n,r,f,t,p,x,m,u;function z(){return{h:[.5,.5],scale:[1,1],J:!1,Ia:!1,ea:!1,F:{h:[.5,.5],w:0,da:1},R:{h:[.5,.5],w:0}}}function B(d){if(Y!==X.pause){var w=Y===X.play?U.La:k.vc;ma=setTimeout(G.bind(null,d),w)}}function S(){if(-1!==[X.play,X.ca].indexOf(Y))return!1;Y=X.play;V.timestamp=Date.now();na&&window.cancelAnimationFrame(na);G(0)}function L(d,w,F,aa){d=4*d+w;return F+(ua[d]/255+ua[d+8]/65025)*(aa-F)}function G(){if(Y!==X.pause){q.Qc();O.reset();O.ua();
a.disable(a.DEPTH_TEST);I.N();q.Ha();var d=P.element.currentTime-P.Ea;0>d&&(P.Ea=P.element.currentTime);1E3*d<k.Ld||(P.J.refresh(),P.Ea+=d,q.set("s61"),P.qa.A(),P.J.a(0),O.f(!1,!1));for(d=0;d<V.U;++d)va=d===V.U-1,q.set("s62"),qa.A(),P.qa.a(0),xa.a(1),O.f(!1,!1),qa.a(0),M.M(!1,qa);d=Date.now();V.oa=d-V.timestamp;if(U.fb){var w=k.Ma;V.timestamp=d;V.Wb=V.U/V.oa;V.ib=V.Wb*w+V.ib*(1-w);V.Xb=1E3/V.oa;V.ja=V.Xb*k.Ma+V.ja*(1-k.Ma);V.ja>k.ga[1]?(V.U=Math.min(V.U+1,k.sa[1]),V.ja=(k.ga[0]+k.ga[1])/2):V.ja<k.ga[0]&&
(V.U=Math.max(V.U-1,k.sa[0]),V.ja=(k.ga[0]+k.ga[1])/2);V.Gc=k.xc/Math.max(V.ib,.001)}I.G();a.viewport(0,0,2,2);q.set("s53");xa.a(0);O.f(!1,!1);a.readPixels(0,0,2,2,a.RGBA,a.UNSIGNED_BYTE,ua);Q.x=L(0,1,-1,1);Q.y=L(0,2,-1,1);Q.pb=L(0,3,0,1);Q.mb=L(1,0,-k.la[0],k.la[0]);Q.nb=L(1,1,-k.la[1],k.la[1]);Q.ob=L(1,2,-k.la[2],k.la[2]);Q.va=L(1,3,0,1);T.Jc=Q.va-E.detected;T.Ta=Q.x-E.x;T.Ua=Q.y-E.y;T.Sa=Q.pb-E.s;T.Pa=Q.mb-E.rx;T.Qa=Q.nb-E.ry;T.Ra=Q.ob-E.rz;d=Math.sqrt(T.Ta*T.Ta+T.Ua*T.Ua+T.Sa*T.Sa)/V.oa;w=Math.sqrt(T.Pa*
T.Pa+T.Qa*T.Qa+T.Ra*T.Ra)/V.oa;d=1-za(k.Cb[0],k.Cb[1],d);w=1-za(k.cc[0],k.cc[1],w);d=d*w*za(k.bc[0],k.bc[1],Q.va);w=sa[++Z%sa.length]=d;for(var F=0;F<sa.length;++F)w=Math.min(w,sa[F]);w=Math.max(.5,w);d=Math.min(w,d);d=ha(k.xb[0],k.xb[1],1-Math.pow(d,k.tc));E.x=ha(E.x,Q.x,d);E.y=ha(E.y,Q.y,d);E.s=ha(E.s,Q.pb,d);E.rx=ha(E.rx,Q.mb,d);E.ry=ha(E.ry,Q.nb,d);E.rz=ha(E.rz,Q.ob,d);E.detected=ha(E.detected,Q.va,k.sc);!ca.ia&&E.detected>k.Eb+k.Db?ca.ia=!0:ca.ia&&E.detected<k.Eb-k.Db&&(ca.ia=!1);if(ca.ia){I.N();
var aa=ba/ea;d=E.x+k.Pc*E.ry*E.s;w=E.y+E.s*k.Hb[1]*aa;var oa=E.s*k.Hb[0]*aa;F=E.s*k.ya[0];aa*=E.s*k.ya[1];F*=2*P.K[0];aa*=2*P.K[1];d*=2*P.K[0];w*=2*P.K[1];oa*=P.K[0];0<E.rx&&(w*=Math.cos(k.Uc*E.rx));var ya=oa;ya=0>E.ry?ya+Math.sin(E.ry)*k.xa[0]:ya-Math.sin(E.ry)*k.xa[1];ca.v[0].h[0]=d+ya;ca.v[0].h[1]=w;ca.v[0].scale[0]=F;ca.v[0].scale[1]=aa;oa=0<E.ry?oa-Math.sin(E.ry)*k.xa[0]:oa+Math.sin(E.ry)*k.xa[1];ca.v[1].h[0]=d-oa;ca.v[1].h[1]=w;ca.v[1].scale[0]=F;ca.v[1].scale[1]=aa;ca.v.forEach(H)}I.Jd();ca.ia&&
(a.viewport(0,ea/2,ba/2,ea/2),K(ca.v[1]),a.viewport(ba/2,ea/2,ba/2,ea/2),K(ca.v[0]),a.viewport(ba/2,ea/4,ba/4,ea/4),g(ca.v[1]),a.viewport(ba/2+ba/4,ea/4,ba/4,ea/4),g(ca.v[0]),a.viewport(ba/2,0,ba/4,ea/4),y(ca.v[1]),a.viewport(ba/2+ba/4,0,ba/4,ea/4),y(ca.v[0]),a.viewport(0,0,ba/2,ea/2));q.set("s54");xa.a(0);P.qa.a(1);O.f(!1,!1);U.Na&&(E.pupilLeftRadius=ca.v[0].R.w,E.pupilRightRadius=ca.v[1].R.w,U.Na(E));if(Y===X.play||Y===X.ca)na=window.requestAnimationFrame(B)}}function H(d){q.set("s55");q.I("u28",
pa*d.scale[0],pa*d.scale[1]);q.V("u39",d.h);q.V("u4",d.scale);q.u("u41",wa);d.J.A();P.J.a(0);O.f(!1,!1);var w=Ca.process(d.J);d.F.h[0]=ha(d.F.h[0],w.h[0],k.eb);d.F.h[1]=ha(d.F.h[1],w.h[1],k.eb);d.F.w=ha(d.F.w,w.w,k.eb);d.F.da=w.da;q.set("s56");q.I("u39",d.h[0]+d.scale[0]*(2*d.F.h[0]-1),d.h[1]+d.scale[1]*(2*d.F.h[1]-1));q.I("u4",2*d.F.w*d.scale[0],2*d.F.w*d.scale[1]);P.J.a(0);d.Ia.A();O.f(!1,!1);w=d.ea.j();var F=(k.aa-w)/2;q.set("s57");q.u("u42",ra);q.I("u43",F/k.aa,w/k.aa);d.ea.A();d.Ia.a(0);O.f(!1,
!1);W.vd(d.ea,Aa);I.N();for(var aa=0,oa=[.5,.5],ya=0;ya<w;++ya)for(var Ga=0;Ga<w;++Ga){var Oa=Aa[4*(Ga+ya*w)];Oa>aa&&(aa=Oa,oa[0]=(Ga+F)/k.aa,oa[1]=(ya+F)/k.aa)}d.R.h[0]=oa[0];d.R.h[1]=oa[1];d.R.w=k.Fa[0]+aa/255*(k.Fa[1]-k.Fa[0]);d.R.w*=.5}function K(d){d.J.a(0);q.set("s58");q.V("u39",d.F.h);q.u("u44",d.F.w);q.u("u45",d.F.da);O.f(!1,!1)}function g(d){d.Ia.a(0);q.set("s59");q.V("u39",d.R.h);q.u("u46",d.R.w);O.f(!1,!1)}function y(d){d.ea.a(0);q.set("s60");O.f(!1,!1)}function C(){P.qa=W.instance({isPot:!0,
isMirror:!0,isLinear:!0,isFloat:!1,width:ba,height:ea});qa=W.instance({isPot:!0,isFloat:!1,width:M.Mb()});var d={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,k.borderWidth,k.borderHeight,0,0,0,0,0])};xa=Ka.instance(d);ua=new Uint8Array(8*d.width);Q={va:0,x:0,y:0,pb:1,mb:0,nb:0,ob:0};E={detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,pupilLeftRadius:0,pupilRightRadius:0};T={Jc:0,Ta:0,Ua:0,Sa:0,Pa:0,Qa:0,Ra:0};ca.v.forEach(function(w){w.J=W.instance({isPot:!1,isLinear:!0,isFloat:!0,width:k.Wa,
height:Math.round(k.Wa*k.ya[1]/k.ya[0])});w.Ia=W.instance({isPot:!0,isLinear:!0,isFloat:!0,isMipmap:!1,width:k.aa});w.ea=W.instance({isPot:!1,isLinear:!1,isFloat:!1,width:Math.round(k.qd*k.aa)});Aa=new Uint8Array(w.ea.j()*w.ea.j()*4)})}function R(){q.C("s62",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u49",value:1},{type:"2f",name:"u50",value:ka}]);q.C("s63",[{type:"1i",name:"u51",value:0},{type:"1i",name:"u49",value:1},{type:"1f",name:"u54",value:k.minScaleTracked},{type:"1f",name:"u55",value:k.maxScaleTracked},
{type:"1f",name:"u56",value:k.Hd},{type:"1f",name:"u57",value:k.pc},{type:"1f",name:"u58",value:k.nc},{type:"3f",name:"u53",value:[k.sb[0]*ka[0],k.sb[1]*ka[1],k.sb[2]]}]);q.C("s64",[{type:"1i",name:"u51",value:0}]);q.C("s53",[{type:"1i",name:"u49",value:0},{type:"1f",name:"u59",value:ka[0]}]);q.C("s54",[{type:"1i",name:"u49",value:0},{type:"1i",name:"u60",value:1},{type:"2f",name:"u50",value:ka}]);var d=[{type:"1i",name:"u1",value:0}];q.C("s55",d);q.C("s56",d);q.C("s57",[{type:"2f",name:"u33",value:k.Fa}].concat(d));
q.C("s58",d);q.C("s59",d);q.C("s60",d)}function da(){var d=M.Mb(),w=ba/d;l=k.minScale*w;n=k.maxScale*w;r=(1-2*k.borderWidth)/k.nStepsX;f=(1-2*k.borderHeight)/k.nStepsY;t=(n-l)/k.nStepsScale;p=k.borderWidth;x=k.borderHeight;m=1-k.borderWidth;u=1-k.borderHeight;ka=[d/ba,d/ea];b=0;c=k.borderWidth;e=k.borderHeight;N=l}function fa(d){ta(U.vb+k.save,function(w){w=JSON.parse(w);d(w)})}function ia(){if(Ja.o({Oa:U.T,width:ba,height:ea,debug:!1,Zb:function(){h("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(Ja.cd())return!0;
h("GL_INCOMPATIBLE");return!1}h("GL_INCOMPATIBLE");return!1}function la(){xa.Cd(1);a.viewport(0,0,1,1);q.set("s63");q.Ed("u52",c,e,N);O.f(!1,!1);va&&(a.viewport(1,0,1,1),q.set("s64"),O.f(!1,!1));1!==++b%2&&(N+=t,N>n&&(c+=r,N=l,c>m&&(c=p,e+=f,e>u&&(e=x))))}function D(){q.C("s61",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u47",value:P.K}])}function v(){P.K[0]=.5;P.K[1]=.5;var d=P.wa[1]/P.wa[0],w=Ja.O()/Ja.j();d>w?P.K[1]*=w/d:P.K[0]*=d/w}function J(d,w,F){d&&d();d={video:{width:{min:ja.minWidth,
max:ja.maxWidth,ideal:ja.idealWidth},height:{min:ja.minHeight,max:ja.maxHeight,ideal:ja.idealHeight}},audio:!1};ja.deviceId&&(d.deviceId=ja.deviceId);hb(function(aa){w&&w(aa);F(aa)},function(){h("WEBCAM_UNAVAILABLE")},d)}function h(d){Y!==X.error&&(Y=X.error,U.na&&U.na(d))}var k={save:"jeelizPupillometryNNC.json",uc:0,vc:25,Ma:.2,ga:[45,60],xc:1/3.5,sa:[2,5],oc:2,minScale:.3,maxScale:1.1,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,sb:[.1,.1,.25],Hd:60,minScaleTracked:.6,
maxScaleTracked:20,pc:.7,nc:1,Cb:[.0015,.005],cc:[.003,.02],bc:[.9,.98],la:[.49,.42,.17],xb:[.3,1],sc:.2,tc:2,Eb:.5,Db:.03,Hb:[.9,.57],ya:[.22,.22],Pc:.5,Wa:256,xa:[0,0],Uc:3,lc:[.21,.24],kc:40,mc:.4,aa:128,eb:1,dd:.005,Fa:[.07,.65],qd:.15,rd:.025,Ld:20},ja={idealWidth:3264,idealHeight:2448,minWidth:1920,maxWidth:7680,minHeight:1080,maxHeight:4320},ra=k.rd,pa=k.dd,wa=-1,ca={ia:!1,v:[z(),z()]},X={kd:-1,error:-2,Pb:0,play:1,pause:2,ca:3},Y=X.Pb,P={element:!1,J:!1,qa:!1,wa:[0,0],K:[.5,.5],Ea:0},U={na:!1,
Na:!1,vb:"./",T:!1,La:k.uc,fb:!0},M=null;var N=e=c=b=n=l=u=m=x=p=t=f=r=0;var ba=-1,ea=-1,ka=null,qa=null,xa=null,ua=null,Q=null,E=null,T=null,ma=null,na=null,va=!1,Aa=null,V={oa:0,timestamp:0,Wb:0,ib:0,U:k.sa[0],te:k.sa[0],Xb:0,ja:0,Gc:1},sa=new Float32Array(12),Z=0,Ca=null,A={init:function(d){function w(){Y!==X.error&&2===++F&&(v(),P.J=W.instance({H:P.element,isPot:!1,isFloat:!1,isFlipY:!0,isLinear:!0}),D(),U.na&&(U.na(!1,{GL:a,canvasElement:U.T,videoTexture:P.qa.get()}),a.disable(a.BLEND)),S())}
if(Y!==X.Pb)return d.callbackReady&&d.callbackReady("ALREADY_INITIALIZED"),!1;Y=X.kd;d.callbackReady&&(U.na=d.callbackReady);d.callbackTrack&&(U.Na=d.callbackTrack);"undefined"!==typeof d.animateDelay&&(U.La=d.animateDelay);U.fb="undefined"===typeof d.isAdaptative?!0:d.isAdaptative;U.fb||(V.U=k.oc);"undefined"!==typeof d.NNCpath&&(U.vb=d.NNCpath);if(!d.canvasId)return h("NO_CANVASID"),!1;U.T=document.getElementById(d.canvasId);if(!U.T)return h("INVALID_CANVASID"),!1;ba=U.T.width;ea=U.T.height;if(!ba||
!ea)return h("INVALID_CANVASDIMENSIONS"),!1;var F=0;J(d.onWebcamAsk,d.onWebcamGet,function(aa){if(Y!==X.error){var oa=aa.videoHeight;P.wa[0]=aa.videoWidth;P.wa[1]=oa;P.element=aa;w&&w()}});fa(function(aa){if(!ia())return!1;M=new Va;M.xd(aa.layers);M.zd({$b:"gpuRawAvg",od:la});q.rc([{id:"s61",name:"_",W:"attribute vec2 a0;uniform vec2 u47;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u47*a0;}",fa:["a0"],Z:[2],b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
c:["u1","u47"],precision:"lowp"},{id:"s62",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",W:"attribute vec2 a0;uniform sampler2D u49;uniform vec2 u50;varying vec2 vv0;void main(){vec4 a=texture2D(u49,vec2(.17,.5));vec2 b=a.gb,c=a.a*u50;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",fa:["a0"],Z:[2],c:["u1","u49","u50"],precision:"lowp"},{id:"s63",name:"_",b:"uniform sampler2D u51,u49;uniform vec3 u52,u53;uniform float u54,u55,u56,u57,u58;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u51,vec2(.5,.5)),d=texture2D(u51,vec2(.75,.5));float g=dot(e,texture2D(u51,vec2(.75,.75))),h=dot(e,texture2D(u51,vec2(0.,.5))),i=dot(e,texture2D(u51,vec2(.25,.5)));vec4 a=texture2D(u49,vec2(.25,.5));float b=dot(c,e),j=dot(d,e);bool f=b>u57&&b>j+u58;f?a.r=2.:a.r>u56?a.r=0.:a.r>1.9&&(a.a>u55||a.a<u54)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u52);else a.r*=step(1.9,a.r),a.gba+=vec3(g,h,i)*u53*a.a;gl_FragColor=a;}",
W:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"u51 u49 u52 u54 u55 u56 u53 u57 u58".split(" ")},{id:"s64",name:"_",W:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",b:"uniform sampler2D u51;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u51,vec2(0.,.75))),b=dot(e,texture2D(u51,vec2(.25,.75))),c=dot(e,texture2D(u51,vec2(.5,.75))),d=dot(e,texture2D(u51,vec2(.5,.5)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
c:["u51"]},{id:"s53",name:"_",b:"uniform sampler2D u49;uniform float u59;varying vec2 vv0;void main(){float g=step(.5,vv0.y),c=step(.5,vv0.x);vec4 a=texture2D(u49,vec2(vv0.x,.5));a.a=mix(a.a*u59,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",c:["u49","u59"]},{id:"s54",name:"_",b:"uniform sampler2D u49,u60;uniform vec2 u50;varying vec2 vv0;void main(){vec2 a=vec2(1.-vv0.x,vv0.y);vec4 d=texture2D(u49,vec2(.25,.5));vec2 b=d.gb;float i=d.a;vec2 c=i*u50,j=b+c/2.,k=b-c/2.,f=step(k,a)*step(a,j);vec3 l=texture2D(u60,a).rgb;vec2 g=2.*abs(b-a)/c;float m=f.x*f.y*pow(max(g.x,g.y),3.);vec3 h=mix(l,vec3(0.,.6,1.),m);gl_FragColor=vec4(h,1.);}",
c:["u49","u60","u50"]},{id:"s55",name:"_",b:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u28;uniform float u41;const vec3 f=vec3(.3333,.3333,.3333);void main(){vec3 a=vec3(0.);a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y-u28.y)).rgb*1.,a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y)).rgb*2.,a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y+u28.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y-u28.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y)).rgb*2.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y+u28.y)).rgb*1.;vec3 b=vec3(0.);b-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y-u28.y)).rgb*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28.y)).rgb*2.,b-=texture2D(u1,vec2(vv0.x+u28.x,vv0.y-u28.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x-u28.x,vv0.y+u28.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28.y)).rgb*2.,b+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y+u28.y)).rgb*1.;vec3 e=a*a+b*b,h=texture2D(u1,vv0).rgb;float c=dot(e,f),g=dot(h,f);c=smoothstep(u41-.1,u41+.1,c),gl_FragColor=vec4(c,g,0.,1.);}",
W:"attribute vec2 a0;uniform vec2 u4,u39;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u39+u4*a0,vv0=.5*vv0+vec2(.5,.5);}",fa:["a0"],Z:[2],c:["u1","u4","u39","u28","u41"]},{id:"s56",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",W:"attribute vec2 a0;uniform vec2 u4,u39;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u39+u4*a0,vv0=.5*vv0+vec2(.5,.5);}",fa:["a0"],Z:[2],c:["u1","u4","u39"]},{id:"s57",name:"_",b:"uniform sampler2D u1;uniform vec2 u43,u33;uniform float u42;varying vec2 vv0;const float n=3.141592;const int o=4;int l(vec2 a,vec3 d){vec3 b=texture2D(u1,a).rgb;float c=length(b);return int(step(c,u42));}void main(){vec2 h=u43.x*vec2(1.,1.)+vv0*u43.y;vec3 k=texture2D(u1,h).rgb;float c=0.,d,f;int a;vec2 j,i,b;for(float g=0.;g<60.;g+=1.){d=0.,a=o,f=g*n/60.,j=vec2(cos(f),sin(f));for(float e=0.;e<255.;e+=1.){i=(u33.x/2.+e/255.*(u33.y-u33.x)/2.)*j;if(a>0)b=h+i,a-=1-l(b,k),b=h-i,a-=1-l(b,k),d+=1.;}c=max(d,c);}gl_FragColor=vec4(c/255.,0,0,1.);}",
c:["u1","u43","u33","u42"]},{id:"s58",name:"_",b:"uniform sampler2D u1;uniform vec2 u39;uniform float u44,u45;const vec3 g=vec3(0.,1.,0.);varying vec2 vv0;void main(){vec2 b=vec2(1.,u45);float d=distance(vv0*b,u39*b),f=step(abs(d-u44),1e-3);vec3 c=texture2D(u1,vv0).rgb,a=c.g*vec3(1.,1.,1.);a.r+=c.r,a=mix(a,g,f),gl_FragColor=vec4(a,1.);}",c:["u1","u39","u44","u45"]},{id:"s59",name:"_",b:"uniform sampler2D u1;uniform vec2 u39;uniform float u46;const vec3 f=vec3(0.,1.,0.),g=vec3(0.,1.,0.);varying vec2 vv0;void main(){float b=step(abs(distance(vv0,u39)-u46),2e-3),c=step(distance(vv0,u39),4e-3);vec3 d=texture2D(u1,vv0).rgb,a=d;a=mix(a,f,b),a=mix(a,g,c),gl_FragColor=vec4(a,1.);}",
c:["u1","u39","u46"]},{id:"s60",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){float a=texture2D(u1,vv0).r;gl_FragColor=vec4(a,0.,0.,1.);}",c:["u1"]}]);C();Ca=Wa.instance({width:k.Wa,lb:k.lc,Yb:k.kc,dc:k.mc});da();R();w();A.update_controls()});return!0},toggle_pause:function(d){if(-1!==[X.play,X.pause,X.ca].indexOf(Y))return d?-1===[X.play,X.ca].indexOf(Y)?d=!1:(ma&&(clearTimeout(ma),ma=!1),na&&(window.cancelAnimationFrame(na),na=!1),Y=X.pause,d=!0):d=S(),d},toggle_slow:function(d){-1!==
[X.play,X.pause,X.ca].indexOf(Y)&&-1!==[X.play,X.ca].indexOf(Y)&&(Y=d?X.ca:X.play)},set_animateDelay:function(d){U.La=d},resize:function(){var d=U.T.width,w=U.T.height;if(d===ba&&w===ea)return!1;ba=d;ea=w;da();R();v();D();return!0},update_controls:function(){function d(F){return(F=document.getElementById(F))?parseFloat(F.value):!1}var w=d("jeePupilControlIrisEdgeSize");!1!==w&&(pa=w,D());w=d("jeePupilControlIrisThres");!1!==w&&(wa=w);w=d("jeePupilControlIrisRoundness");!1!==w&&Ca.Bd(w);w=d("jeePupilControlPupilSensitivity");
!1!==w&&(ra=w)}};return A}();
;return JEEPUPILAPI;})();